This is an astonishingly hard day 5.

What threw me for a while was that in the example, the given conditions seem to include all transitive effects (i.e. if "1|2" and "2|3" are in the list, "1|3" is as well), but for the actual puzzle input this does not seem to hold..?
